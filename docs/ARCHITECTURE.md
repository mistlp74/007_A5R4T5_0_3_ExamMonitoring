# ExamMonitoring — Architecture Overview

## Overview

**ExamMonitoring** is a web-based exam monitoring system. The server is built with Python using Flask and Flask-SocketIO.  
Users interact with the application through a browser (the client), which loads HTML/CSS pages and communicates with the server via HTTP and real-time WebSocket events (SocketIO).  
The server provides session management, real-time chat, and video monitoring functionalities.  
All core logic is centralized on the server, with the front-end acting as an interface and relay for user input and video data.

---

## Main Components

### 1. Server

- Implemented in Python using Flask and Flask-SocketIO.
- Handles all HTTP requests and routes for page rendering (login, dashboard, session).
- Manages session creation, user joining, and participant tracking in memory.
- Facilitates real-time communication (chat, video frames) via SocketIO.
- Integrates with a Cython-based module (cy_frame.pyx) for efficient face detection in student video frames.
- Logs all significant events and violations to `server.log`.
- Acts as the core business logic and bridge between the client interface and backend analysis.

### 2. Web Client (Browser Pages)

- Built using HTML and CSS, delivered from Flask's `templates/` and `static/` folders.
- Key pages:
    - `login.html` — Role selection and login.
    - `teacher_dashboard.html` — Teacher's session management panel.
    - `student_dashboard.html` — Student entry to sessions.
    - `session.html` — Main session interface for chat and video.
- JavaScript (embedded in session.html) handles real-time events (SocketIO), video capture from webcam, and chat messaging.
- Responsible for capturing video, sending frames, and displaying chat and monitoring data.
- Provides a simple, role-based GUI.

### 3. Session Logic

- Sessions are identified by a unique code generated by the server.
- Each session maintains a list of participants (teacher and students) in server memory.
- Role-based separation of functionality:
    - **Teacher:** Can create/join sessions, receive student video frames, and chat with all participants.
    - **Student:** Can join sessions, send webcam video frames, chat with teacher.
- Real-time chat and video frame transmission are handled via SocketIO events (`send_message`, `video_frame`, `receive_frame`).

### 4. OpenCV & Cython Module

- `cy_frame.pyx` is a Cython-accelerated Python module using OpenCV and MediaPipe.
- Optimized for fast face detection using image pyramids and optional GPU acceleration (CUDA).
- Processes incoming video frames (JPEG base64 from students), detects presence of a face.
- Provides results to the server for violation logic (no face detected = possible cheating).

---

## Data Flow

- User accesses the application in their browser, interacts with pages served by Flask.
- Actions (login, create/join session) trigger server-side logic via HTTP POST.
- In active sessions:
    - Browser captures webcam video (student) and sends frames to server via SocketIO.
    - Server processes frames, runs face detection, notifies participants of violations via chat.
    - Real-time messages and video frames are relayed through SocketIO rooms to appropriate users.
- All major events and violations are logged in `server.log`.

---

## Error Handling

- Server-side logging captures errors and violations for audit and debugging.
- Client-side JavaScript displays alerts for issues such as webcam access errors.
- Attempts to join non-existent sessions result in HTTP 404 error responses.

---

## Security Considerations

- This is a demonstration project and does **not** implement encryption (HTTPS) or robust authentication.
- Session access is controlled only by knowledge of the session code.
- No persistent user accounts or role-based authorization.
- For production use, additional security mechanisms are required (authentication, authorization, HTTPS, CSRF protection, etc.).

---

## Diagram

```
Browser (Client)
  |
  |-- HTTP (login, dashboard, session pages)
  |-- SocketIO (chat, video frames)
  v
Flask Server (app.py)
  |
  |-- Session management (in-memory)
  |-- Logging (server.log)
  |-- Video frame processing (cy_frame.pyx, OpenCV, MediaPipe)
  v
Teacher/Student Dashboards & Session Room
```

---

## Additional Notes

- All data (sessions, users, logs) are stored in server memory or as flat log files; no database is used.
- Real-time features depend on SocketIO and may require proper server deployment for scale.
- The architecture is modular and can be extended for new features (e.g. database storage, advanced monitoring, authentication).
